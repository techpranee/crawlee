```
LinkedIn Hiring Posts Scraper - System Architecture
====================================================

┌─────────────────────────────────────────────────────────────────┐
│                       LOCAL RUNNER FLOW                          │
└─────────────────────────────────────────────────────────────────┘

  You                    Chrome                 LinkedIn
   │                       │                       │
   │  Run Script           │                       │
   │──────────────────────>│                       │
   │                       │                       │
   │                       │  Navigate to Search   │
   │                       │──────────────────────>│
   │                       │                       │
   │                       │  <HTML with posts>    │
   │                       │<──────────────────────│
   │                       │                       │
   │  Extract Posts        │                       │
   │<──────────────────────│                       │
   │                       │                       │
   v                       v                       v

For each post:
┌──────────────────────────────────────────────────────────────────┐
│                                                                   │
│  1. Scroll to post (human-like: 1-2 seconds)                    │
│  2. Extract author, text, URL                                   │
│  3. Check if it mentions "hiring" keywords                      │
│  4. Send to Ollama AI for extraction                            │
│  5. Save structured lead to MongoDB                             │
│  6. Wait 18-30 seconds (human behavior)                         │
│  7. Check for rate limits                                       │
│                                                                   │
└──────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                      OLLAMA AI EXTRACTION                        │
└─────────────────────────────────────────────────────────────────┘

Input (Post Text):
   "We're hiring! Looking for Senior Backend Engineers 
    with Python/AWS experience. Remote or SF Bay Area.
    Salary $150k-$200k. Apply at: https://jobs.example.com"

Ollama AI (deepseek-r1:14b)
   │
   │  Analyze and extract structured data...
   │
   v

Output (JSON):
   {
     "company": "Example Corp",
     "jobTitles": ["Senior Backend Engineer"],
     "locations": ["Remote", "SF Bay Area"],
     "seniority": "Senior",
     "skills": ["Python", "AWS"],
     "salaryRange": "$150k-$200k",
     "workMode": "Remote",
     "applicationLink": "https://jobs.example.com"
   }

┌─────────────────────────────────────────────────────────────────┐
│                      MONGODB STORAGE                             │
└─────────────────────────────────────────────────────────────────┘

Database: crawlee
├── campaigns
│   └── {
│         _id: "507f1f77bcf86cd799439011",
│         name: "Hiring Posts - 2025-10-03",
│         status: "running" → "completed",
│         stats: {
│           postsProcessed: 50,
│           leadsExtracted: 42,
│           errors: 0
│         }
│       }
│
└── linkedinleads
    ├── {
    │     _id: "507f1f77bcf86cd799439012",
    │     campaignId: "507f1f77bcf86cd799439011",
    │     authorName: "Jane Smith",
    │     company: "TechCorp",
    │     jobTitles: ["Senior Backend Engineer"],
    │     locations: ["Remote", "San Francisco"],
    │     skills: ["Python", "AWS", "Docker"],
    │     salaryRange: "$150k-$200k",
    │     workMode: "Remote",
    │     postUrl: "https://linkedin.com/...",
    │     applicationLink: "https://jobs.techcorp.com/..."
    │   }
    ├── { ... lead 2 ... }
    ├── { ... lead 3 ... }
    └── { ... 39 more leads ... }

┌─────────────────────────────────────────────────────────────────┐
│                    HUMAN BEHAVIOR PATTERNS                       │
└─────────────────────────────────────────────────────────────────┘

Timeline for processing 1 post:
├─ 0s:  Scroll to post (smooth)
├─ 1s:  Wait (viewport stabilization)
├─ 2s:  Extract post data
├─ 3s:  Send to Ollama AI
├─ 5s:  Receive AI response
├─ 6s:  Parse and validate JSON
├─ 7s:  Save to MongoDB
├─ 8s:  START WAIT (18-30 seconds)
│        │
│        │  (Mimics human reading time)
│        │
├─ 28s: END WAIT
└─ 28s: Move to next post

Rate Limit Detection:
✓ Check URL for /authwall, /checkpoint
✓ Check page for "try again later"
✓ Check for verification prompts
✗ Rate limit detected → Stop gracefully

┌─────────────────────────────────────────────────────────────────┐
│                       DATA FLOW DIAGRAM                          │
└─────────────────────────────────────────────────────────────────┘

    Script Start
         │
         v
    ┌────────┐
    │ Connect│
    │ MongoDB│
    └────┬───┘
         │
         v
    ┌────────────┐
    │   Create   │
    │  Campaign  │
    └────┬───────┘
         │
         v
    ┌──────────────┐
    │ Launch Chrome│
    │ (logged in)  │
    └────┬─────────┘
         │
         v
    ┌──────────────────┐
    │ Navigate to      │
    │ LinkedIn Search  │
    │ (past week only) │
    └────┬─────────────┘
         │
         v
    ┌──────────────────┐
    │ Get Posts on Page│
    └────┬─────────────┘
         │
         v
    ╔════════════════╗
    ║  For Each Post ║
    ╚════╤═══════════╝
         │
         v
    ┌─────────────────┐       ┌────────────┐
    │  Extract Data   │──────>│  Contains  │──No──> Skip
    │  (author, text) │       │  "hiring"? │
    └────┬────────────┘       └────────────┘
         │                         │
         │                         Yes
         v                         │
    ┌──────────────┐              │
    │ Send to      │<─────────────┘
    │ Ollama AI    │
    └────┬─────────┘
         │
         v
    ┌──────────────┐
    │ Parse JSON   │
    │ Response     │
    └────┬─────────┘
         │
         v
    ┌──────────────┐
    │ Save Lead to │
    │   MongoDB    │
    └────┬─────────┘
         │
         v
    ┌──────────────┐
    │ Update       │
    │ Campaign     │
    │ Progress     │
    └────┬─────────┘
         │
         v
    ┌──────────────┐
    │ Wait 18-30s  │
    │ (human delay)│
    └────┬─────────┘
         │
         v
    ┌──────────────┐       ┌────────────┐
    │ Check Rate   │──Yes─>│ Stop & Save│──> Exit
    │   Limit?     │       │  Progress  │
    └────┬─────────┘       └────────────┘
         │
         No
         │
         v
    ┌──────────────┐
    │ More posts?  │──Yes──> Back to "For Each Post"
    └────┬─────────┘
         │
         No
         │
         v
    ┌──────────────┐
    │ Need to      │──Yes──> Scroll Page
    │ scroll?      │         └──> Load More
    └────┬─────────┘
         │
         No
         │
         v
    ┌──────────────┐
    │ Mark Campaign│
    │  Completed   │
    └────┬─────────┘
         │
         v
    ┌──────────────┐
    │ Close Browser│
    └────┬─────────┘
         │
         v
    ┌──────────────┐
    │ Show Summary │
    │   & Exit     │
    └──────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                      EXAMPLE SEARCH QUERY                        │
└─────────────────────────────────────────────────────────────────┘

LinkedIn Search URL:
https://www.linkedin.com/search/results/content/?
  keywords=hiring+OR+recruiting+OR+%22we%27re+hiring%22+
          +%28software+OR+engineer+OR+developer%29
  &datePosted=%22past-week%22
  &sortBy=%22date_posted%22

Decoded:
- Keywords: hiring OR recruiting OR "we're hiring" 
            (software OR engineer OR developer)
- Date: past-week
- Sort: date_posted (newest first)

Results:
✓ Posts from last 7 days
✓ Containing hiring keywords
✓ Mentioning tech roles
✓ Sorted by newest

┌─────────────────────────────────────────────────────────────────┐
│                        OUTPUT EXAMPLE                            │
└─────────────────────────────────────────────────────────────────┘

Console Output:
──────────────────────────────────────────────────────────────────
🚀 Starting LinkedIn Hiring Posts Scraper
📊 Config: Max 50 posts, Query: "hiring OR recruiting..."
✓ Connected to MongoDB
✓ Created campaign: 507f1f77bcf86cd799439011
🌐 Launching Chrome with existing profile...
✓ Browser ready
🔍 Navigating to search...
📄 Found 25 posts on page

📝 Processing post 1/50
   Author: Jane Smith
   Text preview: We're hiring! Looking for Senior Backend...
   🤖 Extracting lead details with AI...
   ✅ Lead saved! (1 total)
      Jobs: Senior Backend Engineer, Python Developer
      Locations: Remote, San Francisco

📝 Processing post 2/50
   Author: Tech Recruiter
   Text preview: Join our team! Multiple positions...
   🤖 Extracting lead details with AI...
   ✅ Lead saved! (2 total)
      Jobs: Full Stack Engineer, DevOps Engineer
      Locations: New York, Remote

... (continues) ...

✅ Scraping completed!
📊 Summary:
   Posts processed: 50
   Leads extracted: 42
   Errors: 0
   Campaign ID: 507f1f77bcf86cd799439011
──────────────────────────────────────────────────────────────────

MongoDB Results:
──────────────────────────────────────────────────────────────────
> db.linkedinleads.find().count()
42

> db.linkedinleads.findOne()
{
  _id: ObjectId("507f1f77bcf86cd799439012"),
  tenantId: "local-test-tenant",
  campaignId: ObjectId("507f1f77bcf86cd799439011"),
  linkedInId: "7123456789012345678",
  authorName: "Jane Smith",
  authorHeadline: "Senior Recruiter at TechCorp",
  company: "TechCorp",
  jobTitles: ["Senior Backend Engineer"],
  locations: ["Remote", "San Francisco"],
  seniority: "Senior",
  skills: ["Python", "AWS", "Docker"],
  salaryRange: "$150k-$200k",
  workMode: "Remote",
  postUrl: "https://linkedin.com/feed/update/...",
  applicationLink: "https://jobs.techcorp.com/apply/12345",
  createdAt: ISODate("2025-10-03T17:15:00Z")
}
──────────────────────────────────────────────────────────────────
```
